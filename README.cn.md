# Filfil - 押节点,借Fil

一个自由的Filecoin流动性市场。

## 背景

建设Filecoin节点需要大量质押币，已成为Filecoin网络增长的瓶颈之一，市场有对fil的借贷需求不断增长。已建成节点本身就有很大价值，其中包括质押币、未来收益、线性释放收益，是理想的抵押品，本项目期望通过抵押节点的数字资产，释放节点的的流动性，为Filecoin网络发展增加动力。

FVM即将上线，FIP-0029已经发布，技术的进步打开了抵押借贷市场的空间，现在我们有机会利用智能合约和市场化机制，安全可信的完成履约过程，所有拥有的fil的投资者都可以贡献流动性，所有拥有节点的建设者都可以获得继续发展的动力

Filfi项目的目标是为Filecoin社区创造一个无许可的流动性市场。

## 应用场景
- 存储提供商扩大生产时需要大量质押币，通过将已有节点抵押，获得所需的fil。
- 朋友之间的拆借，希望借助智能合约实现一种中立可靠的履约机制。
- 借贷双方互不相识，希望在一个无许可的双边市场中自由撮合，以市场化方式定价。
- 持有fil的人希望一种安全可靠的投资方式。
- 持有fil的人希望储蓄生息。

## 问题
- 现实世界中借贷的核心问题在于履约，基于熟人信任和个人诚信的借贷，在发生风险时会变得脆弱且不稳定。
- 借贷有时发生在熟人之间，价格通过谈判确定，有时发生在公开市场之间，价格由供需确定，需要同时支持两种方式。另外还要区分借贷和存贷两种模式。
- 节点的价值是复合的，包括质押币、未来收益、线性释放收益，抵押哪个部分，抵押多少，都需要非常灵活的借贷方案。
- 违约之后的清算需要Owner的配合，如何让智能合约能够独立完成清算过程。
- FVM虚拟机上线后将产生更多链上资产，能否支持fil之外更多的资产类别，甚至支持跨链资产（比如USDT）。

## 解决方案
- 依据FIP-0029提案，通过将智能合约加入节点受益人，实现节点的链上抵押，这是可信履约的基础。
- 通过创造一个抵押借贷市场，让任何人无许可加入市场，自由撮合
- 支持自主定价和市场定价两种机制，适应各种借贷场景。
- 依据FIP-0044提案，通过智能合约实现最大程度的自动化清算。
- 通过与Fil生态中的跨链项目合作，实现跨链资产借贷。

## 角色

### 借方
- 提供fil流动性的一方，任何人可以无许可的自由加入。
- 通过借出fil获得收益。（可扩展支持Filecoin的其他链上资产）
- 借出方式可以是： 1. 定向借贷， 2. 定价借贷  3. 储蓄生息
- 当贷方违约时，智能合约自动清算抵押品，偿还借方资产。

### 贷方
- 借入fil的一方，通过抵押节点资产获得流动的fil。
- 节点可抵押的资产包括
  - 质押币
  - 未来收益（流动部分和锁定部分）
- 需要扣除的成本
  - Gas费

### 数据输入
- 去中心化的信息输入架构
- 支持从现实世界的数据输入到区块链（当支持跨链资产时，需要通过该系统监控资产的市场价格）

### DAO组织
- 是由个人和服务提供商组成的，通过治理代币和治理流程向DAO提供特定的服务。
- 成员都是独立的市场参与者，而非受雇者。
- 成员被划分为不同的角色。例如，治理协调员，负责主持沟通和治理流程；风险团队成员，通过金融风险研究和起草关于引入新型担保物和管理现有担保物的提案来支持Filfi治理。

## 业务流程

### 贷方

1. 创建资产包，配置抵押方案
使用个人钱包登录Filfi的DApp，创建资产包，根据提示进入下一步。
2. 回到Filcoin节点上完成抵押操作
将节点收益人改为上一步产生的智能合约地址，并在DApp中完成确认。
3. 配置抵押方案，确定最终锁定的资产
在DApp中锁定需要抵押的资产。清算发生时只会涉及锁定资产，未锁定资产将始终安全。
4. 选择从公开市场获得借贷
浏览DApp给出的公开市场借贷价格，如果接受，fil将立刻转入指定账户。
5. 选择定向借贷
填写借贷价格，向借方发送链接。借方完成操作后，fil将立刻转入指定账户。
6. 偿还债务
使用个人钱包登录Filfi的DApp，偿还债务。
7. 回到Filecoin节点取消抵押
将智能合约从受益人中移除，并在DApp中完成确认（或智能合约自动检查），资产将自动转入借方账户。


### 借方
1. 浏览借贷合约
使用个人钱包登录Filfil的DApp，查看借方发出的借贷合约详情。
2. 投入fil
通过个人钱包签名，向智能合约投入fil。
3. 随时浏览资产情况
使用个人钱包登录Filfil的DApp，可随时查看资产情况。
4. 当贷方发生偿还时，资产自动转入指定账户



## 智能合约模块

### 资产包模块
资产包模块保存了Filfi协议的基本构件。
- 数据库--风险参数以及抵押品和债务余额。
- 会计系统 - 更新数据库的基本会计操作。
- 资产包管理 - 调整锁定的抵押品和债务状况。
- 资产包流动--转让、分割和合并资产包的能力
资产包这些构件被设计为不可升级或替换。

### 抵押品模块
Filecoin节点的抵押需要多步操作完成，抵押品模块管理整个过程。
- 增加抵押品 - 将节点抵押到资产包。
- 锁定抵押品 - 锁定节点的部分资产。

### 清算模块
当违约条件发生时，清算模块将对资产包做清算处理，包括两种方式：
- 终结节点 - 通过终结节点回收全部资产
- 债务拍卖 - 在无法终结节点的情况下，通过拍卖方式回收资产。

### 清算基于两个原则
- 最大程度覆盖债务
- 最大程度返还抵押品所有者

### 信使模块
当支持跨链资产时，Filfi协议需要关于资产包中作为抵押品的资产的市场价格的实时信息。最终，这个市场价格决定了清算的条件。甲骨文模块处理市场价格如何在区块链上记录。
信使模块是一个接口合约，外部行为者从价格预言机模块中提取指定抵押品类型的当前市场价格。

### 治理模块
治理模块包含，代币和授权、投票、提案执行和投票安全的合约。


## 产品
Filfil - Fil流动性市场DApp
- Web版：HTML5页面版本，通过钱包登录
- 移动版：安装在手机上，不连接任何中心化服务器。

## 开发计划


